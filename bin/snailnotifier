#!/usr/bin/env python
# -*- coding: utf-8 -*-

if __name__ == '__main__':
    import argparse
    parser = argparse.ArgumentParser(description='device notifier for xkeynail')
    parser.add_argument('device', type=str)
    args = parser.parse_args()

    from os.path import basename
    device_name = basename(args.device)

    import socket
    sock = socket.socket(socket.AF_UNIX, socket.SOCK_DGRAM)
    from xkeysnail.watch import socket_path
    sock.connect(socket_path)

    message = {'name': device_name}

    from json import dumps
    sock.sendall(dumps(message).encode('utf-8'))
    sock.close()


    

